(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{372:function(s,e,t){s.exports=t.p+"assets/img/action.d6ae4e41.jpg"},405:function(s,e,t){"use strict";t.r(e);var a=t(17),r=Object(a.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"更新部署-♺"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新部署-♺"}},[s._v("#")]),s._v(" 更新部署 ♺")]),s._v(" "),e("blockquote",[e("p",[s._v("久不更新，忘了本地编译模板的指令，更忘了怎么推送的，记录一下，方便之后写博客")])]),s._v(" "),e("p",[s._v("参考: "),e("a",{attrs:{href:"https://vuepress.vuejs.org/zh/guide/getting-started.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://vuepress.vuejs.org/zh/guide/getting-started.html"),e("OutboundLink")],1)]),s._v(" "),e("h2",{attrs:{id:"step-1-在本地启动服务器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-1-在本地启动服务器"}},[s._v("#")]),s._v(" Step 1. 在本地启动服务器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" docs:dev "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# npm run docs:dev")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("然后访问："),e("a",{attrs:{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:8080"),e("OutboundLink")],1)]),s._v(" "),e("h2",{attrs:{id:"step-2-github-hook"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-2-github-hook"}},[s._v("#")]),s._v(" Step 2. github hook")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v(".github/workflows/vuepress-deploy.yml\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("配置了两个任务")]),s._v(" "),e("ol",[e("li",[s._v("自动 "),e("code",[s._v("checkout")]),s._v(" 出 master")]),s._v(" "),e("li",[s._v("自动 "),e("code",[s._v("deploy")]),s._v(" vuepress")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("jobs:\n  build-and-deploy:\n    runs-on: ubuntu-latest\n    steps:\n    - name: Checkout\n      uses: actions/checkout@master\n\n    - name: vuepress-deploy\n      uses: jenkey2011/vuepress-deploy@master\n      env:\n            TARGET_BRANCH: gh_pages\n            BUILD_SCRIPT: "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" docs:build\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h2",{attrs:{id:"step-3-git-push-origin-master-check-action-status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-3-git-push-origin-master-check-action-status"}},[s._v("#")]),s._v(" Step 3. git push origin master & check action status")]),s._v(" "),e("p",[s._v("确认一下任务运行的状态，是否部署成功")]),s._v(" "),e("ul",[e("li",[s._v("push 到 main 分支就行了")]),s._v(" "),e("li",[s._v("生成的 assets、html、js、css 都在 gh_pages 分支上，静态内容，挂在pages服务上")])]),s._v(" "),e("p",[e("img",{attrs:{src:t(372),alt:"image"}})]),s._v(" "),e("h2",{attrs:{id:"step-4-comments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-4-comments"}},[s._v("#")]),s._v(" Step 4. comments")]),s._v(" "),e("blockquote",[e("p",[s._v("评论系统\nhttps://vssue.js.org/zh/guide/")])]),s._v(" "),e("p",[s._v("在需要评论的页面添加"),e("code",[s._v('<Vssue :title="$title" />')]),s._v("标签，即可。")]),s._v(" "),e("h2",{attrs:{id:"历史错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#历史错误"}},[s._v("#")]),s._v(" 历史错误")]),s._v(" "),e("h4",{attrs:{id:"error-error-0308010c-digital-envelope-routines-unsupported"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#error-error-0308010c-digital-envelope-routines-unsupported"}},[s._v("#")]),s._v(" Error: error:0308010C:digital envelope routines::unsupported")]),s._v(" "),e("p",[s._v("Solution: "),e("code",[s._v("export NODE_OPTIONS=--openssl-legacy-provider")])]),s._v(" "),e("Vssue",{attrs:{title:s.$title}})],1)}),[],!1,null,null,null);e.default=r.exports}}]);